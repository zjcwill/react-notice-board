{"version":3,"file":"mylib.cjs.development.js","sources":["../src/IMG_BRAND.ts","../src/index.tsx"],"sourcesContent":["export default `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAcCAYAAAA5pQx5AAACf0lEQVRYR81YvXITMRDetd3zAoTBKWM6yeMaOh4CyrRQUaSJUzAUaUjLK7iioiO1bakj6RgY8AvQMeDxZu4GMcdF0q6kOweX0kq734/2ZCF4ftPpdLLb7T61pxDxyhjzqBpXSpFvLSL+BID3RPTMWvvbFxMam81mR9vt9sozf22tnTTH6cVjf/6LS5Tk9AZpredEdOoBPjfGnMWAuzWDweBkvV6/kRThYiR5XWwvwJVSFetH7aJHo9FkuVxeN8dTVOJISMnbOfAcICkFh8BrrQ+J6LPE5lVM58BT7Naw6CkRzT1H48wYc2vcB14p9QAAvgJA9Ixaa+t5DnioB7n1t5LkqJfjEh94rfUrIjoBgHshZ/QCvARADmHcmY/Nc4pze/+jeI7Nu7Q7V2xvn7MS1UrckgK4889ZF4WXEJcKvjOrczaX3Oa01tndPdSF24Q0mtt3ALjfmt/gxeWB5IL194xzanHEVMlKXJMM/OWTp0D0rgF+A4jH+PbjBzFwScEcMY55aVyqtbuOrxXn1JQQc1fdPZeQGjinEkdMX3f3XFCSdShRkyOmnSg1XlJo1zEYUtP9rZQQ0y6qj+7uurm0CbZrQsQNABwbY+rmh2113EPCeDx+vlgsfqXY3CXLIavRHL0PDKXAa7CIG2NM/bljXyv2bVvuX5XU8tw+UeAlykkL9PSHqOLSfYuA59hcWlgojitYuj+3T1Txfds8duNyZ7x34FKbd00Op1TvwKU2L/l0+UDcOXCpklJnlColXc/FBd/c/tzdk148QyQNh8PD1Wr1hSumOZ97QZHmiAKXvngyyarP0kNr7TdpUf9Fc5O8eEYA/UDE18aY8xTQ+wR+A3jcZWsSRVoZAAAAAElFTkSuQmCC`;\n","import * as React from 'react';\nimport styled, { keyframes, Keyframes } from 'styled-components';\nimport IMG_BRAND from './IMG_BRAND';\n\ninterface IProps {\n  dataSource: string[];\n  stepDuration?: number;\n  width?: number;\n  height?: number;\n  extra?: React.ReactElement | null | false;\n  textClassName?: string | undefined;\n  hideBrand?: boolean;\n}\ninterface IState {\n  dataSource: string[];\n  keyframesValue: string;\n}\ninterface IContent extends IProps {\n  animation: Keyframes | null;\n  duration: number;\n}\n\nconst Wrapper = styled.div<IProps>`\n  width: ${props => (props.width ? `${props.width}px` : '100%')};\n  height: ${props => (props.height ? `${props.height}px` : '44px')};\n  background: rgba(255, 255, 255, 1);\n  box-shadow: 0px 0px 2px 0px rgba(0, 0, 0, 0.1);\n  border-radius: 2px;\n  overflow: hidden;\n  display: flex;\n`;\n\nconst LogoImg = styled.img`\n  width: 31px;\n  height: 14px;\n  margin: auto 0 auto 16px;\n`;\n\nconst Content = styled.div<IContent>`\n  overflow: hidden;\n  animation: ${props => (props.animation ? props.animation : '')}\n    ${props => props.duration}s linear infinite;\n  margin-right: auto;\n  margin-left: 12px;\n`;\nconst Text = styled.p<IProps>`\n  color: #ff6f41;\n  line-height: ${props => (props.height ? `${props.height}px` : '44px')};\n  margin: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n`;\n\nconst ExtraWrapper = styled.div`\n  float: right;\n  display: flex;\n  align-items: center;\n`;\n\nexport default class NoticeBoard extends React.PureComponent<IProps, IState> {\n  static defaultProps = {\n    stepDuration: 1000,\n    height: 44,\n    className: '',\n    hideBrand: false,\n  };\n  constructor(props: IProps) {\n    super(props);\n    this.state = {\n      dataSource: [],\n      keyframesValue: ``,\n    };\n  }\n  componentDidMount = () => {\n    this.init();\n  };\n  componentWillReceiveProps(nextProps: any) {\n    if (\n      JSON.stringify(nextProps.dataSource) !==\n      JSON.stringify(this.props.dataSource)\n    ) {\n      this.init();\n    }\n  }\n  handleDataSource = () => {\n    const { dataSource = [] } = this.props;\n    return new Promise((resolve, reject) => {\n      if (dataSource.length > 0) {\n        this.setState(\n          {\n            dataSource: dataSource.concat(dataSource[0]),\n          },\n          () => {\n            resolve();\n          }\n        );\n      } else {\n        reject('dataSource.length must >= 1');\n        throw new Error('dataSource.length must >= 1');\n      }\n    });\n  };\n  get stepLen() {\n    const { dataSource = [] } = this.props;\n    return dataSource.length * 2;\n  }\n  get duration() {\n    const { stepDuration = 1000, dataSource } = this.props;\n\n    return (dataSource.length * stepDuration) / 1000;\n  }\n\n  get scrollKeyFrames() {\n    const { keyframesValue } = this.state;\n    if (keyframesValue) {\n      return keyframes`\n        ${keyframesValue}\n      `;\n    }\n    return null;\n  }\n\n  init = async () => {\n    await this.handleDataSource();\n    this.createKeyFrames();\n  };\n  createKeyFrames = () => {\n    const { height = 0 } = this.props;\n    const per = 100 / this.stepLen;\n    let offset = 0;\n    const cssStr: string[] = [];\n    for (let i = 0; i <= this.stepLen; i++) {\n      const even = i % 2 === 0;\n      if (i !== 0 && even) {\n        offset += height;\n      }\n      const v = `\n        ${i * per}% {\n          margin-top: -${offset}px\n        }\n      `;\n      cssStr.push(v);\n    }\n    const css = cssStr.join('');\n    this.setState({ keyframesValue: css });\n  };\n  render() {\n    const { dataSource } = this.state;\n    const { extra, textClassName, hideBrand } = this.props;\n    return (\n      <div>\n        <Wrapper {...this.props}>\n          {!hideBrand && <LogoImg src={IMG_BRAND} />}\n          <Content\n            {...this.props}\n            animation={this.stepLen > 2 ? this.scrollKeyFrames : null}\n            duration={this.duration}\n          >\n            {dataSource.map((item, index) => (\n              <Text\n                {...this.props}\n                className={textClassName}\n                key={`${index}-${item}`}\n              >\n                {item}\n              </Text>\n            ))}\n          </Content>\n          {extra && <ExtraWrapper>{extra}</ExtraWrapper>}\n        </Wrapper>\n      </div>\n    );\n  }\n}\n"],"names":["Wrapper","styled","div","props","width","height","LogoImg","img","Content","animation","duration","Text","p","ExtraWrapper","NoticeBoard","init","dataSource","Promise","resolve","reject","length","setState","concat","Error","handleDataSource","createKeyFrames","per","stepLen","offset","cssStr","i","even","v","push","css","join","keyframesValue","state","componentWillReceiveProps","nextProps","JSON","stringify","render","extra","textClassName","hideBrand","React","src","IMG_BRAND","scrollKeyFrames","map","item","index","className","key","stepDuration","keyframes"],"mappings":"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"}